<!DOCTYPE>
<html>	    
	<head>
		<script src="API/jquery.js"></script>
		<script src="API/335bootstrap.js"></script>
		<link href="API/335bootstrap.css" rel="stylesheet" type="text/css">
		<script type="text/javascript" src="js/index.js"></script>
		
		<link href="images/icons/mobile_navigation/1logo.png" rel="shortcut icon">
		<title>laisa</title>
		
		
		<meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1">
		<link href='css/index.css' rel='stylesheet' type="text/css">
		<link href='css/signin.css' rel='stylesheet' type="text/css">
	</head>
    
	<body>
		<!--Mobile Navigation bar-->
		<div class="mobile_nav_head" id="nav_head">
			<div class="container-fluid">
				<!--
				<a href="javascript:open_profile_menu();">
					<img id="profile_menu" src="images/icons/mobile_navigation/profile_menu.svg">
				</a>
				<a href="javascript:close_profile_menu();">
					<img id="close_menu1" src="images/icons/mobile_navigation/close_menu.svg">
				</a>
				-->
					
				<img id="mobile_logo" src="images/icons/mobile_navigation/logo.svg" style="position: relative; margin-left: 85%;" />
                
				<!--
				<a href="javascript:open_search_menu();">
					<img id="search_menu" src="images/icons/mobile_navigation/search_menu.svg">
				</a>	
				<a href="javascript:close_search_menu();">	
					<img id="close_menu2" src="images/icons/mobile_navigation/close_menu.svg">
				</a>
				-->
				
			</div>
		</div>
                
		<!--Profile Menu-->
		<div id="profile_menu_button">
			<div class="container-fluid">
                        
				<div id="user_account_header">						
					<h2 id="sign_in_heading">Sign In</h2>
                	
					<!-- Sign in Form -->>
					<!--
					<form class="" id="login_form" name="signin_form" action="" method="POST">

						<!-- Email Field -- >
						<input class="" id="email" name="email" type="email" placeholder=" Email Address" required />

						<!-- Password Field -- >
						<input class="" id="password" name="password" type="password" placeholder=" Password" required />
						
						<p id="error_messages"></p>

						<button class="" id="submit" name="" type="button" onclick="login()">Sign in</button>
					</form>
					-->
					<script type="text/javascript">
						function login(){
							var email = _("email").value;
							var password = _("password").value;

							var status = _("error_messages");

							if(email === "" || password === ""){
								status.innerHTML = '<span style="color: #ff0000;font-family: sans-serif;margin-left: 15px;font-size: 15px;">Fill out all of the form data</span>';
							} else {
								_("submit").style.display = "none";
								status.innerHTML = 'please wait ...';
								var ajax = ajaxObj("POST", "http://www.sqaaps.co.za/php/namela/signin.php");
								//var ajax = ajaxObj("POST", "php/signin.php");
								ajax.onreadystatechange = function() {
									if(ajaxReturn(ajax) == true) {
										if(ajax.responseText.slice(-8) === 'loggedin'){
											window.location.assign("html/profile.html");
										} else {
											status.innerHTML = ajax.responseText;
											_("submit").style.display = "block";
										}
									}
								}
								ajax.send("email="+email+"&password="+password);
							}
						}
					</script>
					
							
				</div>  
                   
			</div>
		</div>                
                
		<!--///////////////////////////////////////////////////////////////////////////////////////////// 
						mOBILE Search Menu
		/////////////////////////////////////////////////////////////////////////////////////////////-->
		<div id="search_menu_button">
			<div class="container-fluid" id="search_menu_container">
						
				<h4 id="search_menu_header">Search</h4>
						
				<form id="mobile_search_menu_form" name="mobile_search_menu_form" action="" method="POST">

					<!-- Departure Field -->
					<input id="search_menu_departure" name="departure" type="text" placeholder=" Departure" required />                            

					<!-- Destination Field -->
					<input id="search_menu_destination" name="destination" type="text" placeholder=" Destination" />
					
					<!-- D A T E -->
					<input id="search_menu_date" name="date" type="text" placeholder=" DATE: YYYY/MM/DD" />

					<br>                                            
					<input id="search_menu_offering_transport" type="radio" name="type" value="o" checked/>
					<span id="span_search_menu_offering_looking"> Transport</span>
							
					<br>
					<input id="search_menu_offering_passenger" type="radio" name="type" value="w" />
					<span id="span_search_menu_offering_looking"> Commuters/Passgeners</span>

					<p id="validate_status"></p>

					<!-- Form submit button -->
					<button type="button" id="search_menu_search" name="search_menu_search" onclick="search()" >SEARCH</button>
				</form>

			</div>
		</div>
		
		<script type="text/javascript">
			function search(){
				_("search_menu_button").style.display = "none";
				_("value_prop").style.display = "none";
				_("posts_from_users").style.display = "none";
				_("close_menu2").style.display = "none";
				
				_("search_menu").style.display = "block";
				_("profile_menu").style.display = "block";
				var departure = _("search_menu_departure").value;
				var destination = _("search_menu_destination").value;
				var date = _("search_menu_date").value;
								
				if(_("search_menu_offering_transport").checked){
					var type = "o";
				} else{
					var type = "w";
				}
				
				var status = _("validate_status");
				
				if(departure == "" || destination == "" || date == ""){
					status.innerHTML = '<span style="color: #ff0000;font-family: sans-serif;margin-left: 15px;font-size: 15px;">Fill out all of the form data</span>';
				} else {			
					status.innerHTML = 'please wait ...';
					var ajax = ajaxObj("POST", "http://www.sqaaps.co.za/php/namela/search.php");
					//var ajax = ajaxObj("POST", "php/search.php");
					ajax.onreadystatechange = function() {
						if(ajaxReturn(ajax) == true) {
							_("search_results").innerHTML = ajax.responseText;
						}
					}
					ajax.send("departure="+departure+"&destination="+destination+"&date="+date+"&type="+type+"&index="+'');
				}
			}
		</script>
                
                

		<!--///////////////////////////////////////////////////////////////////////////////////////////// 
                           P R I N T	S E A R C H		R E S U L T S
		/////////////////////////////////////////////////////////////////////////////////////////////-->		
		<div id="search_results"></div>
			


		<!--///////////////////////////////////////////////////////////////////////////////////////////// 
							V A L U E	 P R O P O S I T I O N
		/////////////////////////////////////////////////////////////////////////////////////////////-->
		<div class="value_prop" id="value_prop">
			
			<div id="vp_text">Share a ride with your friends</div>
			<div id="fb_button" style="text-align: center; margin: 10px auto;">
				<fb:login-button id="signup" scope="public_profile,email" onlogin="checkLoginState();"></fb:login-button>	
				<script type="text/javascript">
						function statusChangeCallback(response) {
							console.log('statusChangeCallback');
							console.log(response);
							// The response object is returned with a status field that lets the app know the current login status of the person.

							// Full docs on the response object can be found in the documentation for FB.getLoginStatus().
							if (response.status === 'connected') {
								testAPI();
								/*window.location.assign("html/profile.html");*/
								//alert("loggedIn")
							} /*else {
								window.history.back();
							}*/
						}

						// This function is called when someone finishes with the LoginButton.  See the onlogin handler attached to it in the sample code below.
						function checkLoginState() {
							FB.getLoginStatus(function(response) {
								statusChangeCallback(response);
							});
						}

						window.fbAsyncInit = function() {
							FB.init({
								appId      : '1842810965963847',
								cookie     : true,
								xfbml      : true,
								version    : 'v2.8'
							});

							FB.getLoginStatus(function(response) {
								statusChangeCallback(response);
							});
						};

						// Load the SDK asynchronously
						(function(d, s, id) {
							  var js, fjs = d.getElementsByTagName(s)[0];
							  if (d.getElementById(id)) return;
							  js = d.createElement(s); js.id = id;
							  js.src = "//connect.facebook.net/en_US/sdk.js";
							  fjs.parentNode.insertBefore(js, fjs);
						  }
						(document, 'script', 'facebook-jssdk'));

						// Here we run a very simple test of the Graph API after login is
						// successful.  See statusChangeCallback() for when this call is made.
						function testAPI() {
							console.log('Welcome!  Fetching your information.... ');
							FB.api('/me?fields=email,name,gender,picture.width(150).height(150)', function(response) {
								console.log('Successful login for: ' + response.name);
								console.log('user_friends: ' + response.user_friends);
								localStorage.setItem('id', response.id);
								localStorage.setItem('name', response.name);
								localStorage.setItem('phoneNumber', "undefined");
								localStorage.setItem('email', response.email);
								localStorage.setItem('picture', response.picture.data.url);
								localStorage.setItem('gender', response.gender);
								console.log(JSON.stringify(response));
								//console.log(response.picture.data.url);						
								
								//put the details in my database
								var ajax = ajaxObj("POST", "http://www.sqaaps.co.za/php/namela/signin.php");
								//var ajax = ajaxObj("POST", "./php/signin.php");
								ajax.onreadystatechange = function() {
									if(ajaxReturn(ajax) == true) {
										if(ajax.responseText.slice(-8) === 'inserted'){
											window.location.assign("html/profile.html?" + localStorage.getItem("id"));
										}
									}
								}
								ajax.send('fblogin=' + '' + '&id='+ response.id + '&name=' + response.name + '&picture=' + encodeURIComponent(response.picture.data.url) + '&phonenumber=' + "undefined" + '&email=' + response.email + '&gender=' + response.gender);
							});
						}
						
						
						function start(){
							alert(window.location.href);
						}
						//window.onload = start;
					
					</script>
			</div>
			<div id="arrows">
				<img id="arrows_scroll" src="images/icons/Arrows.svg" />
			</div>
		</div>
            
            
           
		<!--///////////////////////////////////////////////////////////////////////////////////////////// 
							B O D Y		S E C T I O N
		/////////////////////////////////////////////////////////////////////////////////////////////-->
		
		<section class="posts_from_users" id="posts_from_users">
			<div id="how_it_works">
				<h1 id="how_it_works_header">How it works</h1>
                    
				<div id="topic_container">
                            
					<div class="topic_div">                                
						<img id="how_images" src="images/icons/search-icon.png" />                                
						<h3 id="how_header">Search</h3>                                
						<p id="topic">
							Search for already posted adverts travelling similar distances
						</p>
					</div>
                        
					<div class="topic_div">
						<img id="how_images" src="images/icons/List-your-advert-icon.png" />
						<h3 id="how_header">List your Post</h3>
						<p id="topic">
							Post an advert ,whether you’re “looking for transport” or “offering transport”.
						</p>
					</div>
                        
					<div class="topic_div">
						<img id="how_images" src="images/icons/mail.png" />
						<h3 id="how_header">Message</h3>
						<p id="topic">
							Send a message to the advert owner and request additional information and organize pickups. SAFE TRIP
						</p>
					</div>
					
					<!--
					<div class="topic_div">
						<img id="how_images" src="images/icons/request_to_book.svg" />
						<h3 id="how_header">Request to book</h3>
						<p id="topic">
							You send request to the ad-owner to book transport, or request the potential passenger to book.
						</p>
					</div>
                        
					<div class="topic_div">
						<img id="how_images" src="images/icons/payment.svg" />
						<h3 id="how_header">Payment</h3>
						<p id="topic">
							Once the request is accepted and user is booked, payment will be deducted from the passenger’s account, will receive a OTP for check-in
						</p>
					</div>
                        
					<div class="topic_div">
						<img id="how_images" src="images/icons/safe-trip.svg" />
						<h3 id="how_header">Check In</h3>
						<p id="topic">
							On arrival of driver, passenger will check-in and check-out using OTP. Driver receives payment after check-out
						</p>
					</div>
                     -->
					
				</div>
			</div>
                    
			<div id="introduction">
				<div id="container-fluid">
					<h1 id="intro_header">What makes us different</h1>
                    	        
					<p id="intro_paragraph">
						We genuinely want to make ride sharing as safe as possible for both the driver and passengers. We want to make travelling as convenient as possible. We want to make South Africa a smaller place by allowing everyone to travel it.
					</p>
                            
					<!--<iframe id="about_us_video" src="http://www.youtube.com/embed/FJid_h0-k7E?autoplay=0"></iframe>-->
				</div>
			</div>
                    
			<div id="affirmations">
				<h1 id="affirmation_header">What our customers say...</h1>
                            
                        
				<div class="slideshow_container">
                	                                        
					<div class="customer-slides">
						<div class="container-fluid">
                                    
							<div class="affirm_img_div">
								<img id="customer-image" src="images/users/4038452210_018d479345.png" />
							</div>
                                    
							<div class="affirm_text_div" id="statement">
								You know, I was very sceptical at first. With everything happening in the news, I thought it to be absurd to get into a car with someone you don’t. I decided to give it a try, with the route updates, I could update my family how far I was into the journey. It was way more comfortable and convenient because I got dropped off at my gate where my husband was waiting for me.
							</div>
                                
						</div>
					</div>
                                    
					<div class="customer-slides">
						<div class="container-fluid">
                                
							<div class="affirm_img_div">
								<img id="customer-image" src="images/users/danielle_small-620x412.png" />
							</div>
                                    
							<div class="affirm_text_div" id="statement">
								We genuinely want to make ride sharing as safe as possible for both the driver and passengers. We want to make travelling as convenient as possible. We want to make South Africa a smaller place by allowing everyone to travel it.
							</div>
                                    
						</div>
					</div>
                                    
					<div class="customer-slides">
						<div class="container-fluid">
                        	        
							<div class="affirm_img_div">
								<img id="customer-image" src="images/users/roberts1.png" />
							</div>
                                    
							<div class="affirm_text_div" id="statement">
								You know, I was very sceptical at first. With everything happening in the news, I thought it to be absurd to get into a car with someone you don’t. I decided to give it a try, with the route updates, I could update my family how far I was into the journey. It was way more comfortable and convenient because I got dropped off at my gate where my husband was waiting for me.
							</div>
                                    
						</div>
					</div>
                                
					<div class="customer-slides">
						<div class="container-fluid">
                        	    
							<div class="affirm_img_div">
								<img id="customer-image" src="images/users/Mukunzie.png" /> 
							</div>
                                    
							<div class="affirm_text_div" id="statement">
								We genuinely want to make ride sharing as safe as possible for both the driver and passengers. We want to make travelling as convenient as possible. We want to make South Africa a smaller place by allowing everyone to travel it.
							</div>
                                    
						</div>
					</div>
                            
					<a class="left_arrow_link" id="side_arrows" onclick="plusDivs(-1)"  >
						<img id="left_arrow" src="images/icons/left-arrow.svg" />
					</a>
                                
					<a class="right_arrow_link" id="side_arrows" onclick="plusDivs(1)">
						<img id="right_arrow" src="images/icons/right-arrow.svg" />
					</a>
                                
				</div>
			</div>

			<script>                          
				/* Arrow controls*/
				var slideIndex = 1;
				showDivs(slideIndex);

				function plusDivs(n) {
					showDivs(slideIndex += n);
				}

				function showDivs(n) {
					var i;
					var x = document.getElementsByClassName("customer-slides");
                    	                
					if (n > x.length) {
						slideIndex = 1
					}    
                                    
					if (n < 1) {
						slideIndex = x.length
					};
                                    
					for (i = 0; i < x.length; i++) {
						x[i].style.display = "none";  
					}
                                    
					x[slideIndex-1].style.display = "block";  
				}
                                    
				/*Automatic control*/
				var myIndex = 0;
				carousel();

				function carousel() {
					var i;
					var x = document.getElementsByClassName("customer-slides");
                    	                
					for (i = 0; i < x.length; i++) {
						x[i].style.display = "none";  
					}
                                    
					myIndex++;
                    	                    
					if (myIndex > x.length) {
						myIndex = 1
					}    
                                    
					x[myIndex-1].style.display = "block";  
                                    
					setTimeout(carousel, 20000); // Change image every 10 seconds
				}
			</script>            
		</section>


		<div id="send_msg_container"></div>
		
		
       	<!--///////////////////////////////////////////////////////////////////////////////////////////// 
							F O O T E R
		/////////////////////////////////////////////////////////////////////////////////////////////-->
		<footer>
			<div class="container-fluid">
                    
				<ul id="footer_info">
					<li class="footer_items" id="about_us">
						About Us
                    </li>
                    
					<li class="footer_items" id="privacy">
						Privacy & Terms
                    </li>
                    
					<li class="footer_items" id="Careers">
						Careers
                    </li>
                    
					<li class="footer_items" id="contact_us">
						Contact Us
                    </li>
				</ul>
                
				<div id="contact_us_form">
					<h2 id="contact_us_heading">Contact Us</h2>
                        
					<form id="contact_us" name="contact_us" method="post">
						<label id="name_label" for="name_input">Name:</label>
						<input id="name_input" type="text" name="name_input" />
                        
						<br>
						<label id="email_label" for="email_input">Email:</label>
						<input id="email_input" type="email" name="email_input" />
                        
						<br>
						<label id="message_label" for="message_input">Message:</label>
						<textarea id="message_input" name="message_input" rows="10" cols="50"></textarea>
                            
						<br>
						<button id="submit_contact_us_form" type="submit" name="submit_contact_us_form">Submit</button>
                                                      
						<p id="physical_information">
							email: info@namela.co.za
							<br>
							Tel: 011 283 2044/3854
							<br>
							Physical Address: 12 Rivonia drive, Sandton
                        </p>
					</form>                    
				</div>
			</div>
		</footer>
	</body>
</html>